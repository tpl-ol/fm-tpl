# tpl-th
替语言辅助翻译工具 (Translate Helper).


## 目标

通过简单有效, 容易实现的方式, 做到:

1. 提高翻译速度: 通过部分自动化, 减少手工工作量, 减少或避免重复工作.

2. 提高翻译质量: 提高覆盖率, 减少错误, 提高翻译一致性.

从而相比手工操作具有明显的提升.
同时不引入复杂的 AI (自然语言处理 NLP), 将复杂度控制在较低水平.


## 主要功能

1. **待翻译提取**

   从待翻译材料 (比如 TypeScript 的 `.d.ts` 文件) 自动生成待翻译的 `.tpld.toml` 文件.
   同时生成 `.tpld-info.json` 元数据.

   比如抽取待翻译的函数名称.

   首先 `tpl-ast-LANG` 工具负责处理具体的原语言, 生成待翻译的 `.tpld.toml` 和 `.tpld-info.json` 文件.
   然后 `tpl-th` 工具利用 `.tpld.toml` 和 `.tpld-info.json` 文件.
   用户需要阅读/修改 `.tpld.toml` 文件, 无需关心 `.tpld-info.json` 文件.

2. **翻译词典提取**

   从已翻译的 `.tpld.toml` 文件生成翻译词典 (比如 `write` 对应 `写`).

   首先 `tpl-ast-LANG` 工具读取已翻译的 `.tpld.toml` 文件, 生成 `.tpld-info.json` 文件.
   然后 `tpl-th` 工具利用 `.tpld-info.json` 文件生成翻译词典 (`.tpld-dict.json`) 文件.

3. **参考翻译** (内部翻译)

   参考已翻译的材料 (翻译词典) 对待翻译的部分进行自动翻译.
   详见下方说明.

4. **外部翻译**

   参考翻译不能完成的部分 (未知翻译),
   可以通过外部翻译工具 (比如 百度翻译) 进行尝试翻译,
   并导入翻译结果.

5. **人工审核** (修正翻译)

   上述自动翻译部分结束后, 人工检查翻译结果, 并修正翻译.

   可以考虑以编辑器插件 (比如 vscode) 的形式优化人工审核时的体验.

6. **结果检查** (质量检查)

   对人工审核后的翻译结果进行检查,
   检查可能存在的错误 (比如标识符冲突),
   以及翻译不一致 (提高翻译结果的一致性).

   此检查功能也可用于 `tpld` 文件的自动化测试 (CI).

7. **版本对比** (顺畅升级)

   当原材料 (某个库或第三方软件包等) 升级版本之后,
   通过对比 (diff) 得出新版本新增/修改的部分,
   然后只需重新翻译这些改动的部分.

   改动部分的翻译也可以利用上述辅助功能进行自动翻译.

   首先 `tpl-ast-LANG` 工具对新版本生成 `.tpld.toml` 和 `.tpld-info.json` 文件.
   然后 `tpl-th` 工具利用新旧版本的 `.tpld.toml` 和 `.tpld-info.json` 文件执行对比.


## 参考翻译方式

1. **库内参考**

   同一个库/第三方软件包之中的参考.

2. **语言内参考**

   同一个编程语言, 不同的库/第三方软件包之间的参考.

3. **语言间参考**

   不同编程语言之间的参考.

   比如都是英文翻译为中文, `writeFile()` 在 TypeScript 之中没有翻译,
   但是 Java 之中也有 `writeFile()` 并被翻译为 `写文件()`.

4. **全等参考**

   两个标识符完全相同, 采取一致的翻译结果.

5. **分词参考**

   优先级低于 `全等参考`.

   比如已翻译:

   | 原语言 | 目标语言 |
   | :---- | :------ |
   | read() | 读() |
   | write() | 写() |
   | writeFile() | 写文件() |

   待翻译: `readFile()`

   通过简单分词后发现:

   | 单词 | 翻译结果 |
   | :-- | :------- |
   | read | 读 |
   | write | 写 |
   | file | 文件 |

   那么 `readFile()` = read + file = `读文件()`.

   在翻译实践中发现, 多个简单术语排列组合的情况很常见,
   因此这种翻译策略应该有效.

如果以后发现别的简单有效的方式, 也可以继续增加.


TODO
